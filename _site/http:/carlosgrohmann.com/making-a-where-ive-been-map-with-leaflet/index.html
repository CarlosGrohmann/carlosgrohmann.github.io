<!DOCTYPE html>
<html lang="en">
  <!-- Beautiful Jekyll | MIT license | Copyright Dean Attali 2016 -->
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover">

  <title>Making a "where I've been" map with Leaflet</title>

  <meta name="author" content="Carlos H. Grohmann" />

  

  <link rel="alternate" type="application/rss+xml" title="Prof. Carlos H. Grohmann - Personal website of Prof. Carlos H. Grohmann (IEE-USP, Brazil)" href="/feed.xml" />

  

  

  


  
    
      
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css" />


    
  

  
    
      <link rel="stylesheet" href="/css/bootstrap.min.css" />
    
      <link rel="stylesheet" href="/css/bootstrap-social.css" />
    
      <link rel="stylesheet" href="/css/main.css" />
    
  

  
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
    
  

  

  

  

    <!-- Facebook OpenGraph tags -->
  

  
  <meta property="og:title" content="Making a "where I've been" map with Leaflet" />
  

   
  <meta property="og:description" content="In my website I have a map of some (most? all?) of the places I’ve been (here). When I first started with this idea (in 2011, I guess), I used GoogleMaps API and all the points of the map had to be defined in the HTML file, which was very...">
  


  <meta property="og:type" content="website" />

  
  <meta property="og:url" content="http://localhost:4000/http:/carlosgrohmann.com/making-a-where-ive-been-map-with-leaflet/" />
  <link rel="canonical" href="http://localhost:4000/http:/carlosgrohmann.com/making-a-where-ive-been-map-with-leaflet/" />
  

  
  <meta property="og:image" content="http://localhost:4000/img/doodle_crop.jpg" />
  


  <!-- Twitter summary cards -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@" />
  <meta name="twitter:creator" content="@" />

  
  <meta name="twitter:title" content="Making a "where I've been" map with Leaflet" />
  

  
  <meta name="twitter:description" content="In my website I have a map of some (most? all?) of the places I’ve been (here). When I first started with this idea (in 2011, I guess), I used GoogleMaps API and all the points of the map had to be defined in the HTML file, which was very...">
  

  
  <meta name="twitter:image" content="http://localhost:4000/img/doodle_crop.jpg" />
  

  

  

</head>


  <body>

    

  
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
        <a class="navbar-brand" href="http://localhost:4000">Prof. Carlos H. Grohmann</a>
      
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
      
        
          <li>
            





  
  <a href="/index">Home</a>




          </li>
        
        
        
          <li class="navlinks-container">
            <a class="navlinks-parent" href="javascript:void(0)">About Me</a>
            <div class="navlinks-children">
              
                
                  





  
  <a href="/aboutme">Bio|CV</a>




                
              
                
                  





  
  <a href="/photos">Photos</a>




                
              
                
                  





  
  <a href="/gmaps">Map</a>




                
              
            </div>
          </li>
        
        
        
          <li class="navlinks-container">
            <a class="navlinks-parent" href="javascript:void(0)">Research</a>
            <div class="navlinks-children">
              
                
                  





  
  <a href="/grants">Projects</a>




                
              
                
                  





  
  <a href="/students">Students</a>




                
              
                
                  





  
  <a rel="noopener noreferrer" target="_blank" href="https://spamlab.github.io">SPAM!(Lab)</a>




                
              
            </div>
          </li>
        
        
        
          <li>
            





  
  <a href="/publications">Publications</a>




          </li>
        
        
        
          <li class="navlinks-container">
            <a class="navlinks-parent" href="javascript:void(0)">Blog</a>
            <div class="navlinks-children">
              
                
                  





  
  <a href="/blog">Posts</a>




                
              
                
                  





  
  <a href="/tags">Tags</a>




                
              
            </div>
          </li>
        
        
        
          <li>
            





  
  <a href="/search">?</a>




          </li>
        
        
      </ul>
    </div>

	
	<div class="avatar-container">
	  <div class="avatar-img-border">
	    <a href="http://localhost:4000">
	      <img class="avatar-img" src="/img/doodle_crop.jpg" />
		</a>
	  </div>
	</div>
	

  </div>
</nav>


    <!-- TODO this file has become a mess, refactor it -->





<header class="header-section ">

<div class="intro-header no-img">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <h1>Making a "where I've been" map with Leaflet</h1>
		  
		  
		  
		  <span class="post-meta">Posted on May 27, 2014</span>
		  
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

      

      <article role="main" class="blog-post">
        <p>In my website I have a map of some (most? all?) of the places I’ve been (<a href="/gmaps.html">here</a>). When I first started with this idea (in 2011, I guess), I used <a rel="noopener noreferrer" target="_blank" href="https://developers.google.com/maps/">GoogleMaps API</a> and all the points of the map had to be defined in the HTML file, which was very annoying and not very good in terms of maintenance.  Then I discovered <a rel="noopener noreferrer" target="_blank" href="https://www.mapbox.com">MapBox</a> and <a rel="noopener noreferrer" target="_blank" href="https://www.mapbox.com/tilemill/">TileMill</a>, and my life changed. TileMill is a very nice software for creating maps, and you can export the results to your free MapBox account, and have your map on-line in no time. The problem is: if I wanted to update the ‘database’ of places, I’d have to re-import it into TileMill, re-export the project and re-import it into my MapBox account. Too much hassle. So I decided to try something different. I wanted to be able to save/export my ‘database’ (a simple spreadsheet) whenever I updated it, and the map would also be updated without additional steps. After a little bit of Googling, I had a few options: Leaflet, Mapbox and CartoDB. <a rel="noopener noreferrer" target="_blank" href="http://leafletjs.com">Leaflet</a> is an open-source JavaScript library for mobile-friendly maps, MapBox is a well-know an open source mapping platform and provide the JavaScript library mapbox.js (a <a rel="noopener noreferrer" target="_blank" href="https://www.mapbox.com/help/mapboxjs-a-leaflet-plugin/">plugin</a> that extends Leaflet’s functionalities), while <a rel="noopener noreferrer" target="_blank" href="https://cartodb.com">CartoDB</a> is “a cloud-based solution for all your mapping needs”. Both MapBox and CartoDB offer free accounts (with limits on storage/views/etc). With CartoDB it is really simple to import a CSV file (or a lot of other formats) into a table, create a beautiful visualisation of the data, and make it public, share it, etc. I think that CartoDB is easier to maintain than MapBox, since they offer some nice tools to simply update your data (table). But for me, it has the same disadvantage of MapBox: I have to login to the site and upload/update my data. I didn’t want to keep my data in another server. I prefer to upload a text file to the same server where my site is hosted. Even if that requires converting (from, say, CSV to GeoJSON or whatever), because I can put all that into a script. And I like scripts. <a rel="noopener noreferrer" target="_blank" href="http://xkcd.com/1319/">They save us time.</a> So I decided to use Leaflet. I’ll show you how I did it. First, the entire HTML code:</p>

<p>Now let’s see what each part does. The first thing to do is to call the needed libraries. In the <code class="highlighter-rouge">head</code> section of your file, insert these lines to access <code class="highlighter-rouge">leaflet.js</code>, <code class="highlighter-rouge">JQuery</code> and the leaflet plugin <code class="highlighter-rouge">Leaflet.label</code>.</p>

<p>Next we need to define some basic properties for our map:</p>

<p>Now the fun begins. In my case, I opt for using a GeoJSON file with the places I’ve been. To create this file you need to: 1 - export it from spreadsheet as CSV 2 - open it in <a rel="noopener noreferrer" target="_blank" href="https://www.qgis.org">QGIS</a> 3 - save as GeoJSON 4 - simple, right? OK, now that we have the GeoJSON file, we need to do some tricks to open it directly (you can make it a JavaScript file by manually editing it, by it goes against our initial idea). The trick is to reference it in the HTML as a relative link (I got the idea from this <a rel="noopener noreferrer" target="_blank" href="http://lyzidiamond.com/posts/osgeo-august-meeting/">post</a>). In this example, the <code class="highlighter-rouge">places.geojson</code> file is in the same directory as the hmtl file.</p>

<p>Good. Time to create the base layers of the map. I used two layers from MapBox, one from NaturalEarth (for the smaller zooms) and the other is from my personal account (you should have your account as well).</p>

      </article>

      

      
        <!-- Check if any share-links are active -->




<section id = "social-share-section">
  <span class="sr-only">Share: </span>

  
  <!--- Share on Twitter -->
    <a rel="noopener noreferrer" target="_blank" href="https://twitter.com/intent/tweet?text=Making+a+%22where+I%27ve+been%22+map+with+Leaflet+http://localhost:4000/http:/carlosgrohmann.com/making-a-where-ive-been-map-with-leaflet/"
      class="btn btn-social-icon btn-twitter" title="Share on Twitter">
      <span class="fa fa-fw fa-twitter" aria-hidden="true"></span>
      <span class="sr-only">Twitter</span>
    </a>
  

  
  <!--- Share on Facebook -->
    <a rel="noopener noreferrer" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/http:/carlosgrohmann.com/making-a-where-ive-been-map-with-leaflet/"
      class="btn btn-social-icon btn-facebook" title="Share on Facebook">
      <span class="fa fa-fw fa-facebook" aria-hidden="true"></span>
      <span class="sr-only">Facebook</span>
    </a>
  

  
  <!--- Share on Google Plus -->
    <a rel="noopener noreferrer" target="_blank" href="https://plus.google.com/share?url=http://localhost:4000/http:/carlosgrohmann.com/making-a-where-ive-been-map-with-leaflet/"
      class="btn btn-social-icon btn-google" title="Share on Google+">
      <span class="fa fa-fw fa-google-plus" aria-hidden="true"></span>
      <span class="sr-only">Google+</span>
    </a>
  

  

</section>



      

      <ul class="pager blog-pager">
        
        <li class="previous">
          <a href="/http:/carlosgrohmann.com/gsa2014-call-for-abstracts-geological-and-geomorphological-applications-of-digital-terrain-analysis/" data-toggle="tooltip" data-placement="top" title="Gsa2014 Call For Abstracts Geological And Geomorphological Applications Of Digital Terrain Analysis">&larr; Previous Post</a>
        </li>
        
        
        <li class="next">
          <a href="/http:/carlosgrohmann.com/expedicao-serra-do-araca-2015/" data-toggle="tooltip" data-placement="top" title="Expedição Serra do Aracá 2015">Next Post &rarr;</a>
        </li>
        
      </ul>

      
        <div class="disqus-comments">
          
        </div>
          
        <div class="staticman-comments">
          

        </div>
      
    </div>
  </div>
</div>


    <footer>
  <div class="container beautiful-jekyll-footer">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links"><li><a href="/feed.xml" title="RSS"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">RSS</span>
              </a>
            </li><li><a href="https://github.com/CarlosGrohmann" title="GitHub"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">GitHub</span>
              </a>
            </li><li><a href="https://twitter.com/CarlosGrohmann" title="Twitter"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Twitter</span>
              </a>
            </li><li><a href="https://www.instagram.com/CarlosGrohmann" title="Instagram"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-instagram fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Instagram</span>
              </a>
            </li></ul>
      <p class="copyright text-muted">
      Carlos H. Grohmann
      &nbsp;&bull;&nbsp;
      2019

      
      &nbsp;&bull;&nbsp;
      <a href="http://localhost:4000">carlosgrohmann.com</a>
      

      
      </p>
          <!-- Please don't remove this, keep my open source work credited :) -->
    <p class="theme-by text-muted">
      Theme by
      <a href="https://deanattali.com/beautiful-jekyll/">beautiful-jekyll</a>
    </p>
      </div>
    </div>
  </div>
</footer>

  
    






  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script>
      	if (typeof jQuery == 'undefined') {
      	  document.write('<script src="/js/jquery-1.11.2.min.js"></scr' + 'ipt>');
      	}
      </script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
	<script src="/js/bootstrap.min.js"></script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
	<script src="/js/main.js"></script>
    
  


  
  </body>
</html>
