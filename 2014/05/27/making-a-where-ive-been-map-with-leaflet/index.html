<!DOCTYPE html>




<html
 dir="ltr"
 lang="en"
 >
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content=#eeeeee>
    <link rel="stylesheet" href="/assets/css/app.css">
    <link rel="shortcut icon" type="image/png"
           href="/favicon.png" 
    />
    <script defer src="https://unpkg.com/alpinejs@3.9.0/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">
    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-social@1/bin/bulma-social.min.css">
    
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Making a “where I’ve been” map with Leaflet | Prof. Carlos H. Grohmann</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Making a “where I’ve been” map with Leaflet" />
<meta name="author" content="CarlosGrohmann" />
<meta property="og:locale" content="en" />
<meta name="description" content="In my website I have a map of some (most? all?) of the places I’ve been here. When I first started with this idea (in 2011, I guess), I used GoogleMaps API and all the points of the map had to be defined in the HTML file, which was very annoying and not very good in terms of maintenance." />
<meta property="og:description" content="In my website I have a map of some (most? all?) of the places I’ve been here. When I first started with this idea (in 2011, I guess), I used GoogleMaps API and all the points of the map had to be defined in the HTML file, which was very annoying and not very good in terms of maintenance." />
<link rel="canonical" href="http://carlosgrohmann.com/2014/05/27/making-a-where-ive-been-map-with-leaflet/" />
<meta property="og:url" content="http://carlosgrohmann.com/2014/05/27/making-a-where-ive-been-map-with-leaflet/" />
<meta property="og:site_name" content="Prof. Carlos H. Grohmann" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-05-27T00:00:00-03:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Making a “where I’ve been” map with Leaflet" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"CarlosGrohmann"},"dateModified":"2014-05-27T00:00:00-03:00","datePublished":"2014-05-27T00:00:00-03:00","description":"In my website I have a map of some (most? all?) of the places I’ve been here. When I first started with this idea (in 2011, I guess), I used GoogleMaps API and all the points of the map had to be defined in the HTML file, which was very annoying and not very good in terms of maintenance.","headline":"Making a “where I’ve been” map with Leaflet","mainEntityOfPage":{"@type":"WebPage","@id":"http://carlosgrohmann.com/2014/05/27/making-a-where-ive-been-map-with-leaflet/"},"url":"http://carlosgrohmann.com/2014/05/27/making-a-where-ive-been-map-with-leaflet/"}</script>
<!-- End Jekyll SEO tag -->

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7P4EVX4K99"></script>
<script>
  window['ga-disable-G-7P4EVX4K99'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-7P4EVX4K99');
</script><!-- head scripts --></head>

  <body>
    <nav class="navbar is-primary " x-data="{ openNav: false }">
    <div class="container">
        <div class="navbar-brand">
            <a href="/" class="navbar-item">
                Prof. Carlos H. Grohmann
            </a>
            <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navMenu" :class="{ 'is-active': openNav }" x-on:click="openNav = !openNav">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>
        <div class="navbar-menu" id="navMenu" :class="{ 'is-active': openNav }">
            <div class="navbar-start">
                
                
                    
                    <div class="navbar-item has-dropdown is-hoverable ">
                        <a href="" class="navbar-link ">About Me</a>
                        <div class="navbar-dropdown">
                            
                            <a href="/aboutme/" class="navbar-item ">CV/Bio</a>
                            
                            <a href="/gmaps/" class="navbar-item ">Map</a>
                            
                        </div>
                    </div>
                    
                
                    
                    <div class="navbar-item has-dropdown is-hoverable ">
                        <a href="" class="navbar-link ">Research</a>
                        <div class="navbar-dropdown">
                            
                            <a href="/publications/" class="navbar-item ">Publications</a>
                            
                            <a href="/grants/" class="navbar-item ">Projects</a>
                            
                            <a href="/students/" class="navbar-item ">Students</a>
                            
                            <a href="https://spamlab.github.io/" class="navbar-item " target="_blank" rel="noopener noreferrer">SPAMLab</a>
                            
                            <a href="/openstereo/" class="navbar-item ">OpenStereo</a>
                            
                        </div>
                    </div>
                    
                
                    
                    <div class="navbar-item has-dropdown is-hoverable ">
                        <a href="" class="navbar-link ">Outreach</a>
                        <div class="navbar-dropdown">
                            
                            <a href="/videos/" class="navbar-item ">Videos</a>
                            
                            <a href="/sigcomsl/" class="navbar-item ">GIS+FOSS</a>
                            
                        </div>
                    </div>
                    
                
                    
                    <a href="/bjgeo/" class="navbar-item ">BJGEO</a>
                    
                
                    
                    <div class="navbar-item has-dropdown is-hoverable ">
                        <a href="" class="navbar-link ">Blog</a>
                        <div class="navbar-dropdown">
                            
                            <a href="/blog/" class="navbar-item ">Posts</a>
                            
                            <a href="/archive/" class="navbar-item ">Archive</a>
                            
                        </div>
                    </div>
                    
                
                
            </div>

            <div class="navbar-end">
                
            </div>

        </div>
    </div>
</nav>

    
        <section class="hero  is-medium  is-bold is-primary">
    <div class="hero-body ">
        <div class="container">
            <h1 class="title is-2">Making a "where I've been" map with Leaflet</h1>
            <p class="subtitle is-3"></p>
            
        </div>
    </div>
</section>
    
    


    <section class="section">
        <div class="container">
            <div class="columns is-multiline">
                
                <div class="column is-8">
                    
                    

                    
                    
                    <div class="content">

    <p>Published: May 27, 2014 by CarlosGrohmann</p>

    

    <p>In my website I have a map of some (most? all?) of the places I’ve been <a href="http://carlosgrohmann.com/gmaps.html">here</a>. When I first started with this idea (in 2011, I guess), I used <a href="https://developers.google.com/maps/" target="_blank" rel="noopener noreferrer">GoogleMaps API</a> and all the points of the map had to be defined in the HTML file, which was very annoying and not very good in terms of maintenance.</p>

<p>Then I discovered <a href="https://www.mapbox.com" target="_blank" rel="noopener noreferrer">MapBox</a> and <a href="https://www.mapbox.com/tilemill/" target="_blank" rel="noopener noreferrer">TileMill</a>, and my life changed. TileMill is a very nice software for creating maps, and you can export the results to your free MapBox account, and have your map on-line in no time. The problem is: if I wanted to update the ‘database’ of places, I’d have to re-import it into TileMill, re-export the project and re-import it into my MapBox account. Too much hassle.</p>

<p>So I decided to try something different. I wanted to be able to save/export my ‘database’ (a simple spreadsheet) whenever I updated it, and the map would also be updated without additional steps.</p>

<p>After a little bit of Googling, I had a few options: Leaflet, Mapbox and CartoDB. [Leaflet])(http://leafletjs.com) is an open-source JavaScript library for mobile-friendly maps, MapBox is a well-know an open source mapping platform and provide the JavaScript library mapbox.js (a <a href="https://www.mapbox.com/help/mapboxjs-a-leaflet-plugin/" target="_blank" rel="noopener noreferrer">plugin</a> that extends Leaflet’s functionalities), while <a href="https://cartodb.com" target="_blank" rel="noopener noreferrer">CartoDB</a> is “a cloud-based solution for all your mapping needs”. Both MapBox and CartoDB offer free accounts (with limits on storage/views/etc).</p>

<p>With CartoDB it is really simple to import a CSV file (or a lot of other formats) into a table, create a beautiful visualisation of the data, and make it public, share it, etc. I think that CartoDB is easier to maintain than MapBox, since they offer some nice tools to simply update your data (table). But for me, it has the same disadvantage of MapBox: I have to login to the site and upload/update my data.</p>

<p>I didn’t want to keep my data in another server. I prefer to upload a text file to the same server where my site is hosted. Even if that requires converting (from, say, CSV to GeoJSON or whatever), because I can put all that into a script. And I like scripts. <a title="Obligatory XKCD mention" href="http://xkcd.com/1319/" target="_blank" rel="noopener noreferrer">They save us time.</a></p>

<p>So I decided to use Leaflet. I’ll show you how I did it.</p>

<p>First, the entire HTML code:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- JQuery --&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://code.jquery.com/jquery-1.10.2.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

<span class="c">&lt;!-- Leaflet stuff --&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css"</span><span class="nt">&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

<span class="c">&lt;!-- Leaflet Label plugin --&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-label/v0.2.1/leaflet.label.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-label/v0.2.1/leaflet.label.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span><span class="nt">&gt;</span>

<span class="c">&lt;!-- /* LeafLet map props*/ --&gt;</span>
<span class="nt">&lt;style </span><span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<span class="nf">#map</span> <span class="p">{</span> <span class="nl">height</span><span class="p">:</span> <span class="m">350px</span><span class="p">;</span> <span class="nl">width</span><span class="p">:</span> <span class="m">500px</span><span class="p">;}</span>
<span class="nt">&lt;/style&gt;</span>

<span class="c">&lt;!-- LeafLet map  - relative link --&gt;</span>

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"map"</span><span class="nt">&gt;&lt;/div&gt;</span>

<span class="c">&lt;!-- places.geojson --&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"points"</span> <span class="na">type=</span><span class="s">"application/json"</span> <span class="na">href=</span><span class="s">"places.geojson"</span><span class="nt">&gt;</span>
<span class="c">&lt;!-- &lt;script src='places.geojson' type="text/javascript"&gt;&lt;/script&gt; --&gt;</span>

<span class="nt">&lt;script&gt;</span>
    <span class="c1">// create map</span>
    <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="dl">'</span><span class="s1">map</span><span class="dl">'</span><span class="p">).</span><span class="nf">setView</span><span class="p">([</span><span class="mi">15</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">);</span>
    <span class="c1">// Natural Earth - zooms 0-6</span>
    <span class="nx">naturalEarth</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">tileLayer</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://{s}.tiles.mapbox.com/v3/mapbox.natural-earth-2/{z}/{x}/{y}.png</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">maxZoom</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="na">minZoom</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="na">attribution</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&amp;copy; Tiles Courtesy of &lt;a href="https://www.mapbox.com" title="MapBox" target="_blank"&gt;MapBox&lt;/a&gt;</span><span class="dl">'</span><span class="p">,</span>
            <span class="p">}).</span><span class="nf">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
    <span class="c1">// MapBox Terrain - zooms 7-18</span>
    <span class="nx">MBTerrain</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">tileLayer</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://{s}.tiles.mapbox.com/v3/carlosgrohmann.ibb4756i/{z}/{x}/{y}.png</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">maxZoom</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span>
            <span class="na">minZoom</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="na">attribution</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&amp;copy; Tiles Courtesy of &lt;a href="https://www.mapbox.com" title="MapBox" target="_blank"&gt;MapBox&lt;/a&gt;</span><span class="dl">'</span><span class="p">,</span>
            <span class="p">}).</span><span class="nf">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>                
    <span class="c1">// color itens coording to properties</span>
    <span class="kd">function</span> <span class="nf">getColor</span><span class="p">(</span><span class="nx">category</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">category</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">airport</span><span class="dl">"</span>  <span class="p">?</span>   <span class="dl">'</span><span class="s1">#002E63</span><span class="dl">'</span> <span class="p">:</span> 
               <span class="nx">category</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">place</span><span class="dl">"</span>    <span class="p">?</span>   <span class="dl">'</span><span class="s1">#FF7E00</span><span class="dl">'</span> <span class="p">:</span>
                                         <span class="dl">'</span><span class="s1">#000</span><span class="dl">'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// Attaching a GeoJSON file with relative link: (from: http://lyzidiamond.com/posts/osgeo-august-meeting/)</span>
      <span class="nx">$</span><span class="p">.</span><span class="nf">getJSON</span><span class="p">(</span><span class="nf">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">link[rel="points"]</span><span class="dl">'</span><span class="p">).</span><span class="nf">attr</span><span class="p">(</span><span class="dl">"</span><span class="s2">href</span><span class="dl">"</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">geoJsonLayer</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nf">geoJson</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">onEachFeature</span><span class="p">:</span> <span class="nf">function </span><span class="p">(</span><span class="nx">feature</span><span class="p">,</span> <span class="nx">layer</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">desc</span> <span class="o">=</span> <span class="nx">feature</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">Title</span>
                <span class="nx">layer</span><span class="p">.</span><span class="nf">bindLabel</span><span class="p">(</span><span class="nx">desc</span><span class="p">)</span>
            <span class="p">},</span>
            <span class="na">pointToLayer</span><span class="p">:</span> <span class="nf">function </span><span class="p">(</span><span class="nx">feature</span><span class="p">,</span> <span class="nx">latlng</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">L</span><span class="p">.</span><span class="nf">circleMarker</span><span class="p">(</span><span class="nx">latlng</span><span class="p">,</span> <span class="p">{</span>
                <span class="na">radius</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                <span class="na">Label</span><span class="p">:</span> <span class="nf">getColor</span><span class="p">(</span><span class="nx">feature</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">Title</span><span class="p">),</span> 
                <span class="na">fillColor</span><span class="p">:</span> <span class="nf">getColor</span><span class="p">(</span><span class="nx">feature</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">category</span><span class="p">),</span> 
                <span class="na">color</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#000</span><span class="dl">"</span><span class="p">,</span>
                <span class="na">weight</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
                <span class="na">opacity</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">,</span>
                <span class="na">fillOpacity</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">,})</span>
            <span class="p">},</span>
        <span class="p">});</span>
        <span class="nx">geoJsonLayer</span><span class="p">.</span><span class="nf">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
      <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>Now let’s see what each part does.</p>

<p>The first thing to do is to call the needed libraries. In the <code class="language-plaintext highlighter-rouge">head</code> section of your file, insert these lines to access <code class="language-plaintext highlighter-rouge">leaflet.js</code>, <code class="language-plaintext highlighter-rouge">JQuery</code> and the leaflet plugin <code class="language-plaintext highlighter-rouge">Leaflet.label</code>.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- JQuery --&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://code.jquery.com/jquery-1.10.2.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

<span class="c">&lt;!-- Leaflet stuff --&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css"</span><span class="nt">&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

<span class="c">&lt;!-- Leaflet Label plugin --&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-label/v0.2.1/leaflet.label.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-label/v0.2.1/leaflet.label.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<p>Next we need to define some basic properties for our map:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- /* LeafLet map props*/ --&gt;</span>
<span class="nt">&lt;style </span><span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<span class="nf">#map</span> <span class="p">{</span> <span class="nl">height</span><span class="p">:</span> <span class="m">350px</span><span class="p">;</span> <span class="nl">width</span><span class="p">:</span> <span class="m">500px</span><span class="p">;}</span>
<span class="nt">&lt;/style&gt;</span>
<span class="c">&lt;!-- LeafLet map  - relative link --&gt;</span>

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"map"</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div>

<p>Now the fun begins. In my case, I opt for using a GeoJSON file with the places I’ve been. To create this file you need to:<br>
1 - export it from spreadsheet as CSV<br>
2 - open it in <a href="https://www.qgis.org" target="_blank" rel="noopener noreferrer">QGIS</a>
3 - save as GeoJSON<br>
4 - simple, right?</p>

<p>OK, now that we have the GeoJSON file, we need to do some tricks to open it directly (you can make it a JavaScript file by manually editing it, by it goes against our initial idea). The trick is to reference it in the HTML as a relative link (I got the idea from this <a href="http://lyzidiamond.com/posts/osgeo-august-meeting/" target="_blank" rel="noopener noreferrer">post</a>). In this example, the <code class="language-plaintext highlighter-rouge">places.geojson</code> file is in the same directory as the hmtl file.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;pre</span> <span class="na">class=</span><span class="s">"prettyprint linenums"</span><span class="nt">&gt;</span><span class="c">&lt;!-- places.geojson --&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"points"</span> <span class="na">type=</span><span class="s">"application/json"</span> <span class="na">href=</span><span class="s">"places.geojson"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/pre&gt;</span>
</code></pre></div></div>

<p>Good. Time to create the base layers of the map. I used two layers from MapBox, one from NaturalEarth (for the smaller zooms) and the other is from my personal account (you should have your account as well).</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    // create map
    var map = L.map('map').setView([15, 0], 1);
    // Natural Earth - zooms 0-6
    naturalEarth = L.tileLayer('http://{s}.tiles.mapbox.com/v3/mapbox.natural-earth-2/{z}/{x}/{y}.png', {
            maxZoom: 4,
            minZoom: 0,
            attribution: '<span class="ni">&amp;copy;</span> Tiles Courtesy of <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://www.mapbox.com"</span> <span class="na">title=</span><span class="s">"MapBox"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>MapBox<span class="nt">&lt;/a&gt;</span>',
            }).addTo(map);
    // MapBox Terrain - zooms 7-18
    MBTerrain = L.tileLayer('http://{s}.tiles.mapbox.com/v3/carlosgrohmann.ibb4756i/{z}/{x}/{y}.png', {
            maxZoom: 18,
            minZoom: 5,
            attribution: '<span class="ni">&amp;copy;</span> Tiles Courtesy of <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://www.mapbox.com"</span> <span class="na">title=</span><span class="s">"MapBox"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>MapBox<span class="nt">&lt;/a&gt;</span>',
            }).addTo(map);                
    // color itens coording to properties
    function getColor(category) {
        return category == "airport"  ?   '#002E63' : 
               category == "place"    ?   '#FF7E00' :
                                         '#000';
    }
</code></pre></div></div>

<p>And then is just a matter of reading the GeoJSON file. Well, actually, there’s a bit more to it. The first part of the code (<code class="language-plaintext highlighter-rouge">getJSON</code>) reads the GeoJSON file and binds the “Title” property (column) to a popUp, which will appear as the mouse hovers over the symbols, thanks to the <code class="language-plaintext highlighter-rouge">Leaflet.label</code> plugin.</p>

<p>The second part (<code class="language-plaintext highlighter-rouge">pointToLayer</code>) will create circle markers for each feature in the GeoJSON file. It will use the color defined in the <code class="language-plaintext highlighter-rouge">getColor</code> function.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    // Attaching a GeoJSON file with relative link: (from: http://lyzidiamond.com/posts/osgeo-august-meeting/)
      $.getJSON($('link[rel="points"]').attr("href"), function(data) {
        var geoJsonLayer = L.geoJson(data, {
            onEachFeature: function (feature, layer) {
                var desc = feature.properties.Title
                layer.bindLabel(desc)
            },
            pointToLayer: function (feature, latlng) {
                return L.circleMarker(latlng, {
                radius: 3,
                Label: getColor(feature.properties.Title), 
                fillColor: getColor(feature.properties.category), 
                color: "#000",
                weight: 0.5,
                opacity: 0.8,
                fillOpacity: 0.8,})
            },
        });
        geoJsonLayer.addTo(map);
      });
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>One thing to note is that in the <code class="language-plaintext highlighter-rouge">pointToLayer</code> function, one can replace the <code class="language-plaintext highlighter-rouge">getColor</code> function with a <a href="http://blog.thematicmapping.org/2012/10/mapping-new-zealand-where-are-hot-and.html" target="_blank" rel="noopener noreferrer">one-line</a> statement (as noted in the code comments), so fell fee to use it that way, I just used the <code class="language-plaintext highlighter-rouge">getColor</code> function here because I think it’s easier to understand (if you are not familiar with coding).</p>

<p>And here’s the final map!</p>

<!-- JQuery -->
<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>

<!-- Leaflet stuff -->
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css">

<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>

<!-- Leaflet Label plugin -->
<script src="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-label/v0.2.1/leaflet.label.js"></script>

<link href="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-label/v0.2.1/leaflet.label.css" rel="stylesheet">

<!-- /* LeafLet map props*/ -->
<style type="text/css">
#map { height: 350px; width: 500px;}
</style>

<!-- LeafLet map  - relative link -->

<div id="map"></div>

<!-- places.geojson -->
<link rel="points" type="application/json" href="/assets/js/places.geojson">

<script>
    // create map
    var map = L.map('map').setView([15, 0], 1);
    // Natural Earth - zooms 0-6
    naturalEarth = L.tileLayer('http://{s}.tiles.mapbox.com/v3/mapbox.natural-earth-2/{z}/{x}/{y}.png', {
            maxZoom: 4,
            minZoom: 0,
            attribution: '&copy; Tiles Courtesy of <a href="https://www.mapbox.com" title="MapBox" target="_blank">MapBox</a>',
            }).addTo(map);
    // MapBox Terrain - zooms 7-18
    MBTerrain = L.tileLayer('http://{s}.tiles.mapbox.com/v3/carlosgrohmann.ibb4756i/{z}/{x}/{y}.png', {
            maxZoom: 18,
            minZoom: 5,
            attribution: '&copy; Tiles Courtesy of <a href="https://www.mapbox.com" title="MapBox" target="_blank">MapBox</a>',
            }).addTo(map);                
    // color itens coording to properties
    function getColor(category) {
        return category == "airport"  ?   '#002E63' : 
               category == "place"    ?   '#FF7E00' :
                                         '#000';
    }
    // Attaching a GeoJSON file with relative link: (from: http://lyzidiamond.com/posts/osgeo-august-meeting/)
      $.getJSON($('link[rel="points"]').attr("href"), function(data) {
        var geoJsonLayer = L.geoJson(data, {
            onEachFeature: function (feature, layer) {
                var desc = feature.properties.Title
                layer.bindLabel(desc)
            },
            pointToLayer: function (feature, latlng) {
                return L.circleMarker(latlng, {
                radius: 3,
                Label: getColor(feature.properties.Title), 
                fillColor: getColor(feature.properties.category), 
                color: "#000",
                weight: 0.5,
                opacity: 0.8,
                fillOpacity: 0.8,})
            },
        });
        geoJsonLayer.addTo(map);
      });
</script>

<p> 
 
 </p>


</div>

<div class="tags">
    
      <span class="tag  is-primary ">
    map
</span>
    
      <span class="tag  is-primary ">
    javascript
</span>
    
      <span class="tag  is-primary ">
    html
</span>
    
      <span class="tag  is-primary ">
    json
</span>
    
      <span class="tag  is-primary ">
    mapbox
</span>
    
</div>


<p><strong>Share</strong></p>
<div class="buttons ">
    <a class="button is-medium is-facebook" onclick="window.open('https://www.facebook.com/share.php?u=http://carlosgrohmann.com/2014/05/27/making-a-where-ive-been-map-with-leaflet/');">
        <span class="icon"><i class="fab fa-facebook fa-lg"></i></span>
    </a>
    <a class="button is-medium is-twitter" onclick="window.open('https://twitter.com/intent/tweet?text=http://carlosgrohmann.com/2014/05/27/making-a-where-ive-been-map-with-leaflet/');">
        <span class="icon"><i class="fab fa-twitter fa-lg"></i></span>
    </a>
    <a class="button is-medium is-linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&amp;url=http://carlosgrohmann.com/2014/05/27/making-a-where-ive-been-map-with-leaflet/&amp;title=Making+a+%22where+I%27ve+been%22+map+with+Leaflet&amp;summary=&amp;source=');">
        <span class="icon"><i class="fab fa-linkedin fa-lg"></i></span>
    </a>
    <a class="button is-medium is-reddit" onclick="window.open('https://reddit.com/submit?url=http://carlosgrohmann.com/2014/05/27/making-a-where-ive-been-map-with-leaflet/');">
        <span class="icon"><i class="fab fa-reddit fa-lg"></i></span>
    </a>
</div>




                </div>
                
                <div class="column is-4-desktop is-4-tablet">
                    <p class="title is-4">Latest Posts</p>

<div class="columns is-multiline">
    
    <div class="column is-12">
        <div class="card">
    
    <header class="card-header">
        <a class="card-header-title" href="/2020/08/23/bjgeo-review-papers/">O que é um Invited Review?</a>
    </header>
    
    <div class="card-content">
        <div class="content">
            
            
                <p></p>
<p>Ultimamente recebemos no <em>Brazilian Journal of Geology</em> (BJGEO) alguns pedidos de autores interessados em enviar artigos de revisão, os <em>“Invited Reviews”</em>. Mas o que é esse tipo de artigo? Uma revisão bibliográfica de tese pode ser publicada dessa maneira? Vamos ver:</p>

            
        </div>
        <div class="has-text-centered">
            <a href="/2020/08/23/bjgeo-review-papers/" class="button is-primary">Read more</a>
        </div>
    </div>
    <footer class="card-footer">
        <p class="card-footer-item">Published: Aug 23, 2020</p>
    </footer>
</div>
    </div>
    
    <div class="column is-12">
        <div class="card">
    
    <header class="card-header">
        <a class="card-header-title" href="/2020/01/28/utm_south/">UTM 23S??</a>
    </header>
    
    <div class="card-content">
        <div class="content">
            
            
                <p></p>
<p>If there’s one thing that I see all the time as a reviewer, is a map of some study area in Brazil with a caption like “UTM coordinates zone 23S”.</p>

            
        </div>
        <div class="has-text-centered">
            <a href="/2020/01/28/utm_south/" class="button is-primary">Read more</a>
        </div>
    </div>
    <footer class="card-footer">
        <p class="card-footer-item">Published: Jan 28, 2020</p>
    </footer>
</div>
    </div>
    
    <div class="column is-12">
        <div class="card">
    
    <header class="card-header">
        <a class="card-header-title" href="/2020/01/27/faq_bjgeo/">FAQ about BJGEO</a>
    </header>
    
    <div class="card-content">
        <div class="content">
            
            
                <p></p>
<p>The <a href="http://www.scielo.br/bjgeo/" target="_blank" rel="noopener noreferrer">Brazilian Journal of Geology</a> is the official publication of the <a href="http://www.sbgeo.org.br/" target="_blank" rel="noopener noreferrer">Brazilian Geological Society</a>. As the Deputy Editor, I receive emails with common questions about the journal. So I decided to crate a page with some useful information for potential authors.</p>

            
        </div>
        <div class="has-text-centered">
            <a href="/2020/01/27/faq_bjgeo/" class="button is-primary">Read more</a>
        </div>
    </div>
    <footer class="card-footer">
        <p class="card-footer-item">Published: Jan 27, 2020</p>
    </footer>
</div>
    </div>
    
</div>




                </div>
                
            </div>
        </div>
    </section>
    
        <footer class="footer">
    <div class="container">
        
        
        <div class="columns is-multiline">
            
            <div class="column has-text-centered">
                <div>
                    <a href="/" class="link">Home</a>
                </div>
            </div>
            
            <div class="column has-text-centered">
                <div>
                    <a href="https://orcid.org/0000-0001-5073-5572" class="link" target="_blank" rel="noopener noreferrer">ORCiD</a>
                </div>
            </div>
            
            <div class="column has-text-centered">
                <div>
                    <a href="https://scholar.google.com/V3s8mq4AAAAJ" class="link" target="_blank" rel="noopener noreferrer">Scholar</a>
                </div>
            </div>
            
            <div class="column has-text-centered">
                <div>
                    <a href="http://lattes.cnpq.br/5846052449613692" class="link" target="_blank" rel="noopener noreferrer">CV Lattes</a>
                </div>
            </div>
            
            <div class="column has-text-centered">
                <div>
                    <a href="https://github.com/CarlosGrohmann" class="link" target="_blank" rel="noopener noreferrer">GitHub</a>
                </div>
            </div>
            
        </div>
        

        <div class="content is-small has-text-centered">
            <p class="">Prof. Carlos H. Grohmann 2024 | Theme built by <a href="https://www.csrhymes.com" target="_blank" rel="noopener noreferrer">C.S. Rhymes</a></p>
        </div>
    </div>
</footer>

    
    <script src="/assets/js/app.js" type="text/javascript"></script><!-- footer scripts --></body>
</html>
